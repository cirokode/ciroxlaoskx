    .top-header{
      position: relative;
      z-index: 1;
      height: 130px;
      background: linear-gradient(180deg,var(--teal-700),var(--teal-700));
      border-radius: 0px 0px 25px 25px;
    }
    .transfer-wrapper{
      display:flex;
      justify-content:center;
      margin-top: -46px;
      padding-bottom: 48px;
    }
    .transfer-card{
      position: relative;
      z-index: 10;
      width: min(96%, 520px);
      background:var(--card);
      border-radius:var(--radius-xl);
      box-shadow:var(--shadow);
      border:1px solid var(--border);
      overflow: visible;
    }
    .card-inner{ padding:22px; }
    .field-label{
      display:block;
      font-size:0.86rem;
      color:var(--label);
      margin-bottom:8px;
      font-weight:600;
      letter-spacing:0.2px;
    }
    .username-wrap{ position:relative; }
    .username-input{
      width:100%;
      height:var(--input-h);
      padding:14px 52px 14px 16px;
      border-radius:var(--radius-md);
      border:2px solid var(--border);
      background:transparent;
      font-size:1rem;
      outline:none;
      transition:border-color .12s, box-shadow .12s, transform .12s;
    }
    .username-input:focus{
      border-color:var(--teal-700);
      box-shadow:0 8px 22px rgba(16,118,112,0.06);
      transform: translateY(-1px);
    }
    #email-icon{
      position:absolute;
      right:10px;
      top:50%;
      transform:translateY(-50%);
      width:42px;
      height:auto;
      object-fit:contain;
      cursor:pointer;
      border-radius:6px;
      background:transparent;
      padding:4px;
    }
    .username-input.is-valid{ border-color: #28a745; box-shadow: 0 6px 18px rgba(40,167,69,0.08); }
    .username-input.is-invalid{ border-color: #dc3545; box-shadow: 0 6px 18px rgba(220,53,69,0.06); }
    .amount-label{
      font-size:0.86rem;
      color:var(--label);
      font-weight:600;
      margin-bottom:8px;
    }
    .amount-block{
      display:flex;
      align-items:center;
      gap:10px;
      background:var(--muted);
      border-radius:12px;
      padding:16px 14px;
      border:1px solid rgba(0,0,0,0.03);
    }
    .amount-rp{
      font-weight:800;
      font-size:44px;
      color:var(--accent);
      line-height:1;
      flex:0 0 auto;
      width:auto;
      margin-right:2px;
    }
    .amount-input{
      flex:1;
      border:none;
      background:transparent;
      font-size:44px;
      font-weight:700;
      outline:none;
      min-width:70px;
    }
    .note-input{
      width:100%;
      height: 100px;
      padding:14px 16px;
      border-radius:var(--radius-md);
      border:2px solid var(--border);
      background:transparent;
      font-size:1rem;
      outline:none;
      resize:none;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    }
    .btn-kirim{
      margin-top:20px;
      width:100%;
      height:56px;
      border-radius:12px;
      background:var(--teal-700);
      color:#fff;
      border:none;
      font-weight:700;
      letter-spacing:2px;
      text-transform:uppercase;
      box-shadow:0 10px 28px rgba(15,122,115,0.12);
      transition: transform .18s ease, box-shadow .18s ease;
    }
    .btn-kirim:hover{
      background: var(--teal-800);
      color: white;
      transform: translateY(-3px);
    }
    .btn-kirim.sending {
      transform: scale(.98);
      filter: saturate(.9);
    }
    .info{
      margin-bottom: 16px;
      background-color: #E3F2FD;
      border-radius: 8px;
      padding: 12px;
      color: var(--teal-700);
      font-size: 14px;
    }

    #toast-container {
      position: fixed;
      top: 72px;
      right: 18px;
      z-index: 1080;
      width: 320px;
      max-width: calc(100% - 36px);
      pointer-events: none;
    }
    .bs-toast {
      pointer-events: auto;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 10px 28px rgba(2,6,23,0.14);
      border: 1px solid rgba(0,0,0,0.06);
      transform: translateX(18px);
      opacity: 0;
      transition: transform .36s cubic-bezier(.2,.9,.3,1), opacity .36s ease;
      background: linear-gradient(180deg, #fff, #fbfbff);
    }
    .bs-toast.show-me {
      transform: translateX(0);
      opacity: 1;
    }
    .bs-toast .toast-inner {
      display:flex;
      gap:12px;
      align-items:flex-start;
      padding:14px 16px;
    }
    .bs-toast .icon-wrap{
      width:44px;
      height:44px;
      min-width:44px;
      border-radius:10px;
      display:grid;
      place-items:center;
      color:#fff;
      font-weight:700;
    }
    .bs-toast .body-title{
      font-weight:700;
      font-size:16px;
      margin-bottom:6px;
      color:#111;
    }
    .bs-toast .body-text{
      font-size:14px;
      color:#333;
      line-height:1.25;
    }
    .bs-toast .close-btn {
      background:transparent;
      border:0;
      color:rgba(11,18,32,0.56);
      font-size:18px;
      padding:6px;
      border-radius:8px;
      cursor:pointer;
      margin-left:auto;
    }
    .toast-success .icon-wrap{ background: linear-gradient(135deg,#2ecc71,#27ae60); }
    .toast-danger .icon-wrap{ background: linear-gradient(135deg,#ff6b6b,#e64a19); }
    .toast-warning .icon-wrap{ background: linear-gradient(135deg,#ffd166,#f2994a); color:#111; }
    .toast-info .icon-wrap{ background: linear-gradient(135deg,#6ec1ff,#4aa3ff); }

    @media (max-width:420px){
      .top-header{ height:110px; }
      #email-icon{ width:34px; height:34px; right:8px; }
      .amount-rp{ font-size:36px; }
      .amount-input{ font-size:22px; }
      #toast-container { right: 12px; left: auto; top: 60px; width: calc(100% - 24px); }
    }

    .toast-icon {
      width: 42px;
      height: 42px;
      object-fit: contain;
    }

    /* ---------- PIN SHEET (added) - improved design + animations ---------- */
    .pin-sheet {
      position: fixed;
      left: 0;
      right: 0;
      bottom: -100%;
      z-index: 2000;
      background: linear-gradient(180deg,#ffffff, #fbfbff);
      border-top-left-radius: 18px;
      border-top-right-radius: 18px;
      box-shadow: 0 -24px 40px rgba(9,10,16,0.12);
      transition: bottom 320ms cubic-bezier(.2,.9,.3,1), transform 220ms cubic-bezier(.2,.9,.3,1);
      padding: 10px 18px 28px;
      max-width: 900px;
      margin: 0 auto;
      will-change: transform;
      touch-action: none;
      opacity: 0;
      transform-origin: 50% 100%;
      transform: translateY(12px) scale(.98);
      backdrop-filter: blur(0px) saturate(1);
    }
    .pin-sheet.show {
      bottom: 0;
      opacity: 1;
      animation: sheetEnter 420ms cubic-bezier(.2,.9,.3,1);
      transform: translateY(0px) scale(1);
      box-shadow: 0 -32px 54px rgba(8,12,30,0.18);
    }

    @keyframes sheetEnter {
      0% { transform: translateY(100%) scale(.96); opacity: 0; filter: blur(2px); }
      45% { transform: translateY(-8px) scale(1.02); }
      70% { transform: translateY(4px) scale(.995); }
      100% { transform: translateY(0); opacity: 1; filter: blur(0); }
    }

    .sheet-top {
      display:flex;
      align-items:center;
      justify-content:center;
      gap:12px;
      margin-bottom: 6px;
    }
    .sheet-handle {
      width: 84px;
      height: 8px;
      background: linear-gradient(90deg,#e5e7ef,#f4f5f9);
      border-radius: 999px;
      box-shadow: 0 3px 10px rgba(12,20,30,0.06) inset, 0 6px 14px rgba(0,0,0,0.04);
      cursor: grab;
      touch-action: none;
    }
    .sheet-handle:active { cursor: grabbing; }
    .pin-sheet .sheet-title {
      text-align: center;
      font-weight: 800;
      letter-spacing: 0.6px;
      margin-bottom: 6px;
      color: #222;
      font-size: 15px;
    }
    .pin-indicators {
      display:flex;
      justify-content:center;
      gap:10px;
      margin-bottom: 12px;
    }
    .pin-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      border: 2px solid #e4e5ea;
      background: transparent;
      transition: background .12s, border-color .12s, transform .12s;
    }
    .pin-dot.filled {
      background: #111;
      border-color: #111;
      transform: scale(1.05);
    }

    .pin-keypad {
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      padding: 6px 8px;
      margin-top: 6px;
    }
    .pin-btn {
      height: 56px;
      border-radius: 999px;
      background: linear-gradient(180deg,#fbfbff,#f3f6ff);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:20px;
      font-weight:700;
      border: 1px solid rgba(15,20,40,0.04);
      cursor:pointer;
      user-select:none;
      box-shadow: 0 8px 18px rgba(12,20,30,0.06);
      transition: transform .06s ease, box-shadow .12s ease, background .12s ease;
    }
    .pin-btn:active { transform: translateY(1px) scale(0.997); box-shadow: 0 6px 14px rgba(12,20,30,0.04); }
    .pin-btn.small { height: 48px; font-size:16px; border-radius: 14px; }
    .pin-actions {
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-top: 8px;
      padding: 0 6px;
    }
    .pin-cancel {
      color: #e05a55;
      font-weight:700;
      background:transparent;
      border:none;
      cursor:pointer;
      font-size:16px;
    }
    .pin-back {
      background: linear-gradient(180deg,#111,#222);
      color: #fff;
      border-radius: 999px;
      height: 56px;
      display:grid;
      place-items:center;
      cursor:pointer;
      font-size:18px;
      box-shadow: 0 8px 18px rgba(12,20,30,0.08);
      border: 1px solid rgba(0,0,0,0.06);
      transition: transform .12s ease;
    }
    .pin-back:active { transform: scale(.98); }

    @media (min-width: 720px){
      .pin-sheet { left: 50%; transform: translateX(-50%); width: 520px; border-radius: 20px; }
    }

    /* ---------- Full page effect overlays (confetti / coin / balloons) ---------- */
    .effect-overlay {
      position: fixed;
      inset: 0;
      z-index: 3000;
      pointer-events: none;
      overflow: visible;
    }
    .effect-overlay .success-center {
      position: absolute;
      left: 50%;
      top: 30%;
      transform: translate(-50%, -50%) scale(.98);
      z-index: 3010;
      text-align: center;
      pointer-events: none;
      opacity: 0;
      transition: opacity .36s ease, transform .48s cubic-bezier(.2,.9,.3,1);
    }
    .effect-overlay.show .success-center { opacity: 1; transform: translate(-50%, -50%) scale(1); }

    .success-badge {
      display: inline-block;
      padding: 18px 22px;
      border-radius: 999px;
      background: linear-gradient(135deg,#59d37f,#2bb673);
      color: #fff;
      font-weight: 900;
      box-shadow: 0 18px 40px rgba(43,148,93,0.2), 0 6px 18px rgba(0,0,0,0.08);
      transform-origin: center;
      letter-spacing: .6px;
      font-size: 18px;
    }

    .balloon {
      position: absolute;
      width: 56px;
      height: 72px;
      border-radius: 50% 50% 50% 50%;
      transform-origin: center bottom;
      opacity: 0;
    }
    .balloon::after {
      content:'';
      position:absolute;
      left: 50%;
      bottom: -12px;
      width: 2px;
      height: 24px;
      background: rgba(0,0,0,0.08);
      transform: translateX(-50%);
    }

    /* subtle page success glow */
    .page-success {
      animation: pageGlow 1200ms ease forwards;
    }
    @keyframes pageGlow {
      0% { box-shadow: none; transform: scale(1); filter: none; }
      30% { transform: scale(1.012); filter: drop-shadow(0 20px 40px rgba(83,123,255,0.08)); }
      100% { transform: scale(1); filter: none; }
    }

    /* small sparkle animation for background */
    .sparkle {
      position: absolute;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fff, rgba(255,255,255,0));
      opacity: 0.95;
      transform: scale(0);
      animation: sparklePop 800ms ease forwards;
    }
    @keyframes sparklePop {
      0% { transform: scale(0); opacity: 0; }
      50% { transform: scale(1.1); opacity: 1; }
      100% { transform: scale(0.4); opacity: 0; }
    }

    /* coin style (fallback) */
    .coin {
      position: absolute;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fff7b3, #ffcc33);
      box-shadow: 0 4px 8px rgba(0,0,0,0.18);
      transform-origin: center;
    }

    /* blur/dim class applied when pin open */
    .page-blur-applied {
      filter: blur(3px) brightness(.98);
      transition: filter 240ms ease;
      pointer-events: auto;
    }

    /* small accessibility helpers */
    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); border: 0; 
             }
   /* --- Settings as collapsible icon --- */
    .ciropay-settings {
      position: fixed;
      right: 14px;
      top: 14px;
      z-index: 4000;
      width: 44px;
      height: 44px;
      background: rgba(255,255,255,0.98);
      border-radius: 10px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.08);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: width .22s ease, height .22s ease, padding .22s ease;
      padding: 6px;
      overflow: hidden;
    }
    .ciropay-settings .gear { font-size: 18px; color: #3b3b3b; }
    .ciropay-settings.open {
      width: 260px;
      height: auto;
      padding: 12px;
      flex-direction: column;
      align-items: flex-start;
    }
    .ciropay-settings .content {
      display: none;
      width: 100%;
      margin-top: 8px;
    }
    .ciropay-settings.open .content { display: block; }
    .ciropay-settings .title { font-weight:700; margin-bottom:6px; font-size:13px; color:#111; }
    .ciropay-settings .row{ display:flex; align-items:center; justify-content:space-between; gap:8px; padding:6px 4px; width:100%; }

    /* --- Celebration visuals (enhanced) --- */
    .celebration-overlay {
      position: fixed;
      inset: 0;
      z-index: 3500;
      pointer-events: none;
      display:flex;
      align-items:center;
      justify-content:center;
      transition: opacity .25s ease;
      opacity: 0;
    }
    .celebration-overlay.show { opacity: 1; pointer-events: none; }
    .celebration-overlay .celebration-text {
      background: linear-gradient(135deg,#59d37f,#2bb673);
      color: #fff;
      padding: 12px 20px;
      border-radius: 999px;
      font-weight:800;
      font-size: 26px;
      box-shadow: 0 18px 60px rgba(43,148,93,0.18);
      transform: translateY(-10px);
      backdrop-filter: blur(6px) saturate(1.1);
    }

    /* error overlay variant */
    .celebration-overlay.error .celebration-text {
      background: linear-gradient(135deg,#ff5d5d,#ff8a8a);
      box-shadow: 0 18px 60px rgba(255,80,80,0.18);
    }

    /* Enhanced balloon style */
    .balloon {
      position: fixed;
      bottom: -160px;
      width: 58px;
      height: 74px;
      border-radius: 50% 50% 45% 45% / 55% 55% 45% 45%;
      box-shadow: 0 16px 36px rgba(0,0,0,0.16), inset 0 -10px 18px rgba(0,0,0,0.06);
      z-index: 3490;
      transform-origin: center bottom;
      animation: balloonFloat linear forwards, balloonSway ease-in-out infinite;
      will-change: transform, opacity;
      display:flex;
      align-items:flex-start;
      justify-content:center;
      overflow:visible;
    }
    .balloon .gloss {
      position:absolute;
      top:8%;
      right:18%;
      width:34%;
      height:30%;
      background: rgba(255,255,255,0.18);
      border-radius: 50%;
      filter: blur(2px);
      transform: rotate(-24deg);
      pointer-events:none;
    }
    .balloon .knot {
      position:absolute;
      bottom:-66px;
      left:50%;
      transform:translateX(-50%);
      width:2px;
      height:72px;
      background: rgba(0,0,0,0.06);
    }
    @keyframes balloonFloat {
      0% { transform: translateY(0) rotate(0deg) scale(0.98); opacity: 0; }
      6% { opacity: 1; }
      50% { transform: translateY(-70vh) rotate(12deg) scale(1.02); }
      100% { transform: translateY(-140vh) rotate(360deg) scale(1); opacity: 1; }
    }
    @keyframes balloonSway {
      0% { transform: translateX(0) rotate(-2deg); }
      25% { transform: translateX(8px) rotate(4deg); }
      50% { transform: translateX(-6px) rotate(-2deg); }
      75% { transform: translateX(4px) rotate(3deg); }
      100% { transform: translateX(0) rotate(-2deg); }
    }

    /* Confetti improved */
    .confetti {
      position: fixed;
      z-index: 3480;
      will-change: transform, opacity;
      border-radius: 2px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.08);
    }
    @keyframes confettiFall {
      0% { transform: translateY(-10vh) rotate(0deg) translateX(0); opacity:1; }
      80% { opacity: 1; }
      100% { transform: translateY(120vh) rotate(720deg) translateX(40vw); opacity: 0.95; }
    }

    /* page pulse (subtle) */
    .page-success {
      animation: pagePulse 1.0s ease forwards;
    }
    @keyframes pagePulse {
      0%{ filter: none; }
      30%{ filter: saturate(1.06) drop-shadow(0 18px 40px rgba(0,0,0,0.06)); transform: scale(1.01); }
      100%{ transform: none; filter: none; }
    }

    /* error shake */
    .page-error {
      animation: pageErrorShake 0.7s ease;
    }
    @keyframes pageErrorShake {
      0% { transform: translateX(0); }
      20% { transform: translateX(-6px); }
      40% { transform: translateX(6px); }
      60% { transform: translateX(-4px); }
      80% { transform: translateX(4px); }
      100% { transform: translateX(0); }
    }

    /* small accessibility announcer */
    #ciropay-announcer { position:absolute; width:1px; height:1px; overflow:hidden; clip: rect(1px,1px,1px,1px); }
